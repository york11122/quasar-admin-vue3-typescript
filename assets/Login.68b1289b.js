import{Q as N}from"./QSkeleton.da6b6e32.js";import{ac as q,aB as F,a3 as z,a4 as f,bA as M,g as O,c as I,h as B,bB as Q,r as w,aD as H,bC as K,av as W,ar as Z,o as J,bD as X,bE as P,aq as Y,a1 as $,b3 as g,d as n,bF as R,bG as T,aa as E,I as k,b as L,O as ee,a2 as G,bt as te,bH as oe,v as ae,b5 as se,bp as ne}from"./index.4309f6b7.js";import{u as re}from"./user.e957649c.js";import{_ as ie}from"./LottieWeb.0d8515a5.js";import{D as le,Q as ue}from"./DarkMode.08c616ce.js";import{Q as A,a as de}from"./QCard.b3b03f43.js";import{Q as U}from"./QInput.3e8d6171.js";import{u as ce,a as fe}from"./use-dark.2dd3d8c6.js";import{Q as me}from"./QSeparator.a12d7da1.js";import{a as V,u as pe}from"./myApi.7cbe0d3c.js";import{a as ve}from"./position-engine.bbe74278.js";import"./tagView.db720147.js";import"./_commonjsHelpers.825a3ddb.js";import"./QTooltip.ac2234cf.js";import"./scroll.78f555df.js";import"./use-form.7ffbff7d.js";const ge={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"896",width:"967.8852157128662"},_e=f("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1),he={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},ye=["stop-color"],be=["stop-color"],xe=f("g",{opacity:"1"},[f("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1),Ce=q({__name:"CornerBottom",props:{startColor:{default:"#28aff0"},endColor:{default:"#120fc4"}},setup(t){return(u,d)=>(F(),z("svg",ge,[f("defs",null,[_e,f("linearGradient",he,[f("stop",{offset:"0","stop-color":t.startColor,"stop-opacity":"1"},null,8,ye),f("stop",{offset:"1","stop-color":t.endColor,"stop-opacity":"1"},null,8,be)])]),xe]))}});var we=M({name:"QBanner",props:{...ce,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(t,{slots:u}){const{proxy:{$q:d}}=O(),c=fe(t,d),a=I(()=>"q-banner row items-center"+(t.dense===!0?" q-banner--dense":"")+(c.value===!0?" q-banner--dark q-dark":"")+(t.rounded===!0?" rounded-borders":"")),r=I(()=>`q-banner__actions row items-center justify-end col-${t.inlineActions===!0?"auto":"all"}`);return()=>{const s=[B("div",{class:"q-banner__avatar col-auto row items-center self-start"},Q(u.avatar)),B("div",{class:"q-banner__content col text-body2"},Q(u.default))],p=Q(u.action);return p!==void 0&&s.push(B("div",{class:r.value},p)),B("div",{class:a.value+(t.inlineActions===!1&&p!==void 0?" q-banner--top-padding":""),role:"alert"},s)}}}),Be=M({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:u,emit:d}){const c=O(),a=w(null);let r=0;const s=[];function p(e){const v=typeof e=="boolean"?e:t.noErrorFocus!==!0,x=++r,_=(o,m)=>{d("validation"+(o===!0?"Success":"Error"),m)},C=o=>{const m=o.validate();return typeof m.then=="function"?m.then(h=>({valid:h,comp:o}),h=>({valid:!1,comp:o,err:h})):Promise.resolve({valid:m,comp:o})};return(t.greedy===!0?Promise.all(s.map(C)).then(o=>o.filter(m=>m.valid!==!0)):s.reduce((o,m)=>o.then(()=>C(m).then(h=>{if(h.valid===!1)return Promise.reject(h)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return x===r&&_(!0),!0;if(x===r){const{comp:m,err:h}=o[0];if(h!==void 0&&console.error(h),_(!1,m),v===!0){const D=o.find(({comp:j})=>typeof j.focus=="function"&&X(j.$)===!1);D!==void 0&&D.comp.focus()}}return!1})}function y(){r++,s.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function b(e){e!==void 0&&P(e);const v=r+1;p().then(x=>{v===r&&x===!0&&(t.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function l(e){e!==void 0&&P(e),d("reset"),Y(()=>{y(),t.autofocus===!0&&t.noResetFocus!==!0&&i()})}function i(){ve(()=>{if(a.value===null)return;const e=a.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),v=>v.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}H(K,{bindComponent(e){s.push(e)},unbindComponent(e){const v=s.indexOf(e);v>-1&&s.splice(v,1)}});let S=!1;return W(()=>{S=!0}),Z(()=>{S===!0&&t.autofocus===!0&&i()}),J(()=>{t.autofocus===!0&&i()}),Object.assign(c.proxy,{validate:p,resetValidation:y,submit:b,reset:l,focus:i,getValidationComponents:()=>s}),()=>B("form",{class:"q-form",ref:a,onSubmit:b,onReset:l},Q(u.default))}});const ke={class:"absolute-top-left q-pa-md"},Fe={class:"col flex justify-center items-center q-pa-md"},qe=f("div",null,"\u5E33\u865F (\u6B0A\u9650): super, admin, \u4EFB\u610F\u8F38\u5165",-1),Se=f("div",null,"\u5BC6\u78BC: \u4EFB\u610F\u8F38\u5165",-1),Qe=q({name:"Login"}),Ee=q({...Qe,props:{username:{default:""},password:{default:""},loading:{type:Boolean,default:!1},message:{default:""}},emits:["update:username","update:password","update:loading","onLoginClick"],setup(t,{emit:u}){const d=t,c=w(!0),a=w(null),r=V(d,"username",u),s=V(d,"password",u),p=V(d,"loading",u),y=async()=>{var l;await((l=a.value)==null?void 0:l.validate())&&u("onLoginClick")};return(b,l)=>(F(),$(de,{flat:"",class:"row",style:{"border-radius":"20px",width:"85%","max-width":"400px"}},{default:g(()=>[f("div",ke,[n(le)]),f("div",Fe,[n(A,null,{default:g(()=>[n(R,{flat:""},{default:g(()=>[n(T,{name:"fa-solid fa-shield-dog",size:"30px"}),n(ue,{shrink:"",class:"text-weight-bold"},{default:g(()=>[E(" Windripple ")]),_:1})]),_:1})]),_:1}),n(A,{align:"center",class:"fit q-gutter-y-sm"},{default:g(()=>[n(k(Be),{ref_key:"loginForm",ref:a,class:"q-gutter-y-sm"},{default:g(()=>[n(U,{modelValue:k(r),"onUpdate:modelValue":l[0]||(l[0]=i=>L(r)?r.value=i:null),placeholder:"\u8ACB\u8F38\u5165\u5E33\u865F",dense:"",clearable:"",outlined:"","lazy-rules":"",rules:[i=>!!i||"\u8ACB\u8F38\u5165\u5E33\u865F"]},null,8,["modelValue","rules"]),n(U,{modelValue:k(s),"onUpdate:modelValue":l[2]||(l[2]=i=>L(s)?s.value=i:null),placeholder:"\u8ACB\u8F38\u5165\u5BC6\u78BC",dense:"",outlined:"",type:c.value?"password":"text","lazy-rules":"",rules:[i=>!!i||"\u8ACB\u8F38\u5165\u5BC6\u78BC"]},{append:g(()=>[n(T,{name:c.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[1]||(l[1]=i=>c.value=!c.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),n(R,{class:"full-width",size:"1.2em",rounded:"",unelevated:"",color:"primary",loading:k(p),onClick:y},{default:g(()=>[E(" \u767B\u5165 ")]),_:1},8,["loading"]),t.message!==""?(F(),$(we,{key:0,"inline-actions":"",dense:"",rounded:"",class:"text-red"},{default:g(()=>[E(ee(t.message),1)]),_:1})):G("",!0)]),_:1},512),n(me,{spaced:"lg"}),n(A,{class:"text-caption text-grey-7"},{default:g(()=>[qe,Se]),_:1})]),_:1})])]),_:1}))}});const Ae={class:"flex justify-center items-center",style:{height:"100%"}},Ve={class:"col-6 flex justify-center items-center"},$e=q({name:"Login"}),Le=q({...$e,setup(t){const u=re(),d=oe(),c=w(""),a=ae({username:"admin",password:"admin"}),r=w(!1),s=w({path:"https://assets1.lottiefiles.com/packages/lf20_gzl797gs.json",loop:!0,animationSpeed:1}),p=pe(),{data:y,isFetching:b,onFetchError:l,onFetchResponse:i,execute:S}=p("/data/mock/login.json",{immediate:!1}).get().json(),e=()=>{c.value="",S()};l(x=>{y.value.message&&(c.value=y.value.message)}),i(async x=>{u.setLoginToken(y.value.accessToken),d.push("/")});const v=()=>{r.value=!0};return(x,_)=>(F(),z("div",Ae,[n(Ce,{class:"wave fit bg-black"}),se(f("div",Ve,[r.value?G("",!0):(F(),$(N,{key:0,type:"text",height:"70%",width:"50%"})),n(ie,{path:s.value.path,onIsLottieFinish:v},null,8,["path"])],512),[[ne,x.$q.screen.gt.sm]]),n(Ee,{username:a.username,"onUpdate:username":_[0]||(_[0]=C=>a.username=C),password:a.password,"onUpdate:password":_[1]||(_[1]=C=>a.password=C),loading:k(b),"onUpdate:loading":_[2]||(_[2]=C=>L(b)?b.value=C:null),onOnLoginClick:e,message:c.value},null,8,["username","password","loading","message"])]))}});var Xe=te(Le,[["__scopeId","data-v-49dadf8e"]]);export{Xe as default};
