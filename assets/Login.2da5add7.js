import{Q as T}from"./QSkeleton.a4047d25.js";import{ab as F,aA as Q,a2 as z,a3 as c,bz as D,g as M,r as w,aC as N,bA as O,au as G,aq as K,o as W,h as Z,bB as H,bC as L,ap as J,a0 as U,b2 as _,d as s,bD as I,bE as q,I as C,b as $,a9 as j,bs as X,bF as Y,v as ee,b4 as te,bo as oe,a1 as se}from"./index.916c630f.js";import{u as ae}from"./user.4018a09e.js";import{_ as ne}from"./LottieWeb.7b2a2e9c.js";import{Q as re}from"./QToolbarTitle.973aada0.js";import{Q as V,a as le}from"./QCard.05ea6d2d.js";import{Q as R}from"./QInput.a2172684.js";import{Q as ie}from"./QSeparator.ab818531.js";import{a as S,u as ue}from"./myApi.8d828a06.js";import{a as de}from"./focus-manager.387b0375.js";import"./use-dark.a531fd09.js";import"./tagView.7431ba44.js";import"./_commonjsHelpers.825a3ddb.js";import"./use-form.5d489f96.js";const ce={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"896",width:"967.8852157128662"},fe=c("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1),pe={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},me=["stop-color"],_e=["stop-color"],ve=c("g",{opacity:"1"},[c("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1),ge=F({__name:"CornerBottom",props:{startColor:{default:"#28aff0"},endColor:{default:"#120fc4"}},setup(n){return(m,f)=>(Q(),z("svg",ce,[c("defs",null,[fe,c("linearGradient",pe,[c("stop",{offset:"0","stop-color":n.startColor,"stop-opacity":"1"},null,8,me),c("stop",{offset:"1","stop-color":n.endColor,"stop-opacity":"1"},null,8,_e)])]),ve]))}});var he=D({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(n,{slots:m,emit:f}){const r=M(),p=w(null);let i=0;const l=[];function x(e){const t=[],d=typeof e=="boolean"?e:n.noErrorFocus!==!0,A=++i,k=(g,u)=>{f("validation-"+(g===!0?"success":"error"),u)};for(let g=0;g<l.length;g++){const u=l[g],b=u.validate();if(typeof b.then=="function")t.push(b.then(h=>({valid:h,comp:u}),h=>({valid:!1,comp:u,err:h})));else if(b!==!0){if(n.greedy===!1)return k(!1,u),d===!0&&typeof u.focus=="function"&&u.focus(),Promise.resolve(!1);t.push({valid:!1,comp:u})}}return t.length===0?(k(!0),Promise.resolve(!0)):Promise.all(t).then(g=>{const u=g.filter(P=>P.valid!==!0);if(u.length===0)return A===i&&k(!0),!0;const{valid:b,comp:h,err:E}=u[0];return A===i&&(E!==void 0&&console.error(E),k(!1,h),d===!0&&b!==!0&&typeof h.focus=="function"&&h.focus()),!1})}function v(){i++,l.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&L(e);const t=i+1;x().then(d=>{t===i&&d===!0&&(n.onSubmit!==void 0?f("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function a(e){e!==void 0&&L(e),f("reset"),J(()=>{v(),n.autofocus===!0&&n.noResetFocus!==!0&&o()})}function o(){de(()=>{if(p.value===null)return;const e=p.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(p.value.querySelectorAll("[tabindex]"),t=>t.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}N(O,{bindComponent(e){l.push(e)},unbindComponent(e){const t=l.indexOf(e);t>-1&&l.splice(t,1)}});let B=!1;return G(()=>{B=!0}),K(()=>{B===!0&&n.autofocus===!0&&o()}),W(()=>{n.autofocus===!0&&o()}),Object.assign(r.proxy,{validate:x,resetValidation:v,submit:y,reset:a,focus:o,getValidationComponents:()=>l}),()=>Z("form",{class:"q-form",ref:p,onSubmit:y,onReset:a},H(m.default))}});const ye={class:"col flex justify-center items-center q-pa-md"},Ce=j(" Windripple "),xe=j(" \u767B\u5165 "),be=c("div",null,"\u5E33\u865F (\u6B0A\u9650): super, admin, \u4EFB\u610F\u8F38\u5165",-1),we=c("div",null,"\u5BC6\u78BC: \u4EFB\u610F\u8F38\u5165",-1),Fe=F({name:"Login"}),Be=F({...Fe,props:{username:{default:""},password:{default:""},loading:{type:Boolean,default:!1}},emits:["update:username","update:password","update:loading","onLoginClick"],setup(n,{emit:m}){const f=n,r=w(!0),p=w(null),i=S(f,"username",m),l=S(f,"password",m),x=S(f,"loading",m),v=async()=>{var a;await((a=p.value)==null?void 0:a.validate())&&m("onLoginClick")};return(y,a)=>(Q(),U(le,{flat:"",class:"row",style:{"border-radius":"20px",width:"85%","max-width":"400px"}},{default:_(()=>[c("div",ye,[s(V,null,{default:_(()=>[s(I,{flat:""},{default:_(()=>[s(q,{name:"fa-solid fa-shield-dog",size:"30px"}),s(re,{shrink:"",class:"text-weight-bold"},{default:_(()=>[Ce]),_:1})]),_:1})]),_:1}),s(V,{align:"center",class:"fit"},{default:_(()=>[s(C(he),{ref_key:"loginForm",ref:p,class:"q-gutter-y-sm"},{default:_(()=>[s(R,{modelValue:C(i),"onUpdate:modelValue":a[0]||(a[0]=o=>$(i)?i.value=o:null),placeholder:"\u8ACB\u8F38\u5165\u5E33\u865F",dense:"",clearable:"",outlined:"","lazy-rules":"",rules:[o=>!!o||"\u8ACB\u8F38\u5165\u5E33\u865F"]},null,8,["modelValue","rules"]),s(R,{modelValue:C(l),"onUpdate:modelValue":a[2]||(a[2]=o=>$(l)?l.value=o:null),placeholder:"\u8ACB\u8F38\u5165\u5BC6\u78BC",dense:"",outlined:"",type:r.value?"password":"text","lazy-rules":"",rules:[o=>!!o||"\u8ACB\u8F38\u5165\u5BC6\u78BC"]},{append:_(()=>[s(q,{name:r.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[1]||(a[1]=o=>r.value=!r.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),s(I,{class:"full-width",size:"1.2em",rounded:"",unelevated:"",color:"primary",loading:C(x),onClick:v},{default:_(()=>[xe]),_:1},8,["loading"])]),_:1},512),s(ie,{spaced:"lg"}),s(V,{class:"text-caption text-grey-7"},{default:_(()=>[be,we]),_:1})]),_:1})])]),_:1}))}});const ke={class:"flex justify-center items-center",style:{height:"100%"}},Qe={class:"col-6 flex justify-center items-center"},Ve=F({name:"Login"}),Se=F({...Ve,setup(n){const m=ae(),f=Y(),r=ee({username:"admin",password:"admin"}),p=w(!1),i=w({path:"https://assets1.lottiefiles.com/packages/lf20_gzl797gs.json",loop:!0,animationSpeed:1}),l=ue(),{data:x,isFetching:v,onFetchError:y,execute:a,onFetchResponse:o}=l("/status/200",{immediate:!1}).post(r);y(e=>{console.log(e,"Error")}),o(async e=>{m.setLoginToken(r.username),f.push("/")});const B=()=>{p.value=!0};return(e,t)=>(Q(),z("div",ke,[s(ge,{class:"wave fit bg-black"}),te(c("div",Qe,[p.value?se("",!0):(Q(),U(T,{key:0,type:"text",height:"70%",width:"50%"})),s(ne,{path:i.value.path,onIsLottieFinish:B},null,8,["path"])],512),[[oe,e.$q.screen.gt.sm]]),s(Be,{username:r.username,"onUpdate:username":t[0]||(t[0]=d=>r.username=d),password:r.password,"onUpdate:password":t[1]||(t[1]=d=>r.password=d),loading:C(v),"onUpdate:loading":t[2]||(t[2]=d=>$(v)?v.value=d:null),onOnLoginClick:t[3]||(t[3]=d=>C(a)())},null,8,["username","password","loading"])]))}});var Ne=X(Se,[["__scopeId","data-v-3b5c37ec"]]);export{Ne as default};
