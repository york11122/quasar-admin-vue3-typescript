import{b as Z,r as D,I as de,c as L,l as pe,t as he,w as S,g as me,A as K,bu as ve,bx as g}from"./index.92fd86a8.js";import{u as ye}from"./user.b31e8ad6.js";var ae;const ee=typeof window!="undefined",be=e=>typeof e!="undefined";ee&&((ae=window==null?void 0:window.navigator)==null?void 0:ae.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function b(e){return typeof e=="function"?e():de(e)}function se(e,t=!1,n="Timeout"){return new Promise((i,r)=>{setTimeout(t?()=>r(n):i,e)})}function Oe(e){return e}function ge(e,...t){return t.some(n=>n in e)}function R(){const e=[],t=r=>{const o=e.indexOf(r);o!==-1&&e.splice(o,1)};return{on:r=>(e.push(r),{off:()=>t(r)}),off:t,trigger:r=>{e.forEach(o=>o(r))}}}function we(e){return pe()?(he(e),!0):!1}function q(e){return typeof e=="function"?L(e):D(e)}function _e(e){let t=!1;function n(a,{flush:d="sync",deep:p=!1,timeout:h,throwOnTimeout:m}={}){let l=null;const B=[new Promise(N=>{l=S(e,j=>{a(j)!==t&&(l==null||l(),N(j))},{flush:d,deep:p,immediate:!0})})];return h!=null&&B.push(se(h,m).then(()=>b(e)).finally(()=>l==null?void 0:l())),Promise.race(B)}function i(a,d){if(!Z(a))return n(j=>j===a,d);const{flush:p="sync",deep:h=!1,timeout:m,throwOnTimeout:l}=d!=null?d:{};let _=null;const N=[new Promise(j=>{_=S([e,a],([P,$])=>{t!==(P===$)&&(_==null||_(),j(P))},{flush:p,deep:h,immediate:!0})})];return m!=null&&N.push(se(m,l).then(()=>b(e)).finally(()=>(_==null||_(),b(e)))),Promise.race(N)}function r(a){return n(d=>Boolean(d),a)}function o(a){return i(null,a)}function s(a){return i(void 0,a)}function c(a){return n(Number.isNaN,a)}function f(a,d){return n(p=>{const h=Array.from(p);return h.includes(a)||h.includes(b(a))},d)}function w(a){return I(1,a)}function I(a=1,d){let p=-1;return n(()=>(p+=1,p>=a),d)}return Array.isArray(b(e))?{toMatch:n,toContains:f,changed:w,changedTimes:I,get not(){return t=!t,this}}:{toMatch:n,toBe:i,toBeTruthy:r,toBeNull:o,toBeNaN:c,toBeUndefined:s,changed:w,changedTimes:I,get not(){return t=!t,this}}}function Fe(e,t,n={}){const{immediate:i=!0}=n,r=D(!1);let o=null;function s(){o&&(clearTimeout(o),o=null)}function c(){r.value=!1,s()}function f(...w){s(),r.value=!0,o=setTimeout(()=>{r.value=!1,o=null,e(...w)},b(t))}return i&&(r.value=!0,ee&&f()),we(c),{isPending:r,start:f,stop:c}}function Ve(e=!1,t={}){const{truthyValue:n=!0,falsyValue:i=!1}=t,r=Z(e),o=D(e);function s(c){if(arguments.length)return o.value=c,o.value;{const f=b(n);return o.value=o.value===f?b(i):f,o.value}}return r?s:[o,s]}const Pe=ee?window:void 0,X=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Y="__vueuse_ssr_handlers__";X[Y]=X[Y]||{};X[Y];var Ee=Object.defineProperty,Te=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertySymbols,Ne=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,ie=(e,t,n)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))Ne.call(t,n)&&ie(e,n,t[n]);if(ue)for(var n of ue(t))je.call(t,n)&&ie(e,n,t[n]);return e},C=(e,t)=>Te(e,Ie(t));const Ce={json:"application/json",text:"text/plain",formData:"multipart/form-data"};function G(e){return ge(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch")}function Q(e){return typeof Headers!="undefined"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function A(...e){return t=>(e.forEach(async n=>{n&&(t=u(u({},t),await n(t)))}),t)}function De(e={}){const t=e.options||{},n=e.fetchOptions||{};function i(r,...o){const s=L(()=>e.baseUrl?$e(b(e.baseUrl),b(r)):b(r));let c=t,f=n;return o.length>0&&(G(o[0])?c=C(u(u({},c),o[0]),{beforeFetch:A(t.beforeFetch,o[0].beforeFetch),afterFetch:A(t.afterFetch,o[0].afterFetch),onFetchError:A(t.onFetchError,o[0].onFetchError)}):f=C(u(u({},f),o[0]),{headers:u(u({},Q(f.headers)||{}),Q(o[0].headers)||{})})),o.length>1&&G(o[1])&&(c=C(u(u({},c),o[1]),{beforeFetch:A(t.beforeFetch,o[1].beforeFetch),afterFetch:A(t.afterFetch,o[1].afterFetch),onFetchError:A(t.onFetchError,o[1].onFetchError)})),Be(s,f,c)}return i}function Be(e,...t){var n;const i=typeof AbortController=="function";let r={},o={immediate:!0,refetch:!1,timeout:0};const s={method:"GET",type:"text",payload:void 0};t.length>0&&(G(t[0])?o=u(u({},o),t[0]):r=t[0]),t.length>1&&G(t[1])&&(o=u(u({},o),t[1]));const{fetch:c=(n=Pe)==null?void 0:n.fetch,initialData:f,timeout:w}=o,I=R(),a=R(),d=R(),p=D(!1),h=D(!1),m=D(!1),l=D(null),_=K(null),B=K(null),N=K(f),j=L(()=>i&&h.value);let P,$;const te=()=>{i&&P&&P.abort()},z=v=>{h.value=v,p.value=!v};w&&($=Fe(te,w,{immediate:!1}));const H=async(v=!1)=>{var F;z(!0),B.value=null,l.value=null,m.value=!1,P=void 0,i&&(P=new AbortController,P.signal.onabort=()=>m.value=!0,r=C(u({},r),{signal:P.signal}));const O={method:s.method,headers:{}};if(s.payload){const M=Q(O.headers);s.payloadType&&(M["Content-Type"]=(F=Ce[s.payloadType])!=null?F:s.payloadType);const W=b(s.payload);O.body=s.payloadType==="json"?JSON.stringify(W):W}let k=!1;const E={url:b(e),options:u(u({},O),r),cancel:()=>{k=!0}};if(o.beforeFetch&&Object.assign(E,await o.beforeFetch(E)),k||!c)return z(!1),Promise.resolve(null);let T=null;return $&&$.start(),new Promise((M,W)=>{var re;c(E.url,C(u(u({},O),E.options),{headers:u(u({},Q(O.headers)),Q((re=E.options)==null?void 0:re.headers))})).then(async y=>{if(_.value=y,l.value=y.status,T=await y[s.type](),o.afterFetch&&l.value>=200&&l.value<300&&({data:T}=await o.afterFetch({data:T,response:y})),N.value=T,!y.ok)throw new Error(y.statusText);return I.trigger(y),M(y)}).catch(async y=>{let oe=y.message||y.name;return o.onFetchError&&({data:T,error:oe}=await o.onFetchError({data:T,error:y,response:_.value})),N.value=T,B.value=oe,a.trigger(y),v?W(y):M(null)}).finally(()=>{z(!1),$&&$.stop(),d.trigger(null)})})},ne=q(o.refetch);S([ne,q(e)],([v])=>v&&H(),{deep:!0});const V={isFinished:p,statusCode:l,response:_,error:B,data:N,isFetching:h,canAbort:j,aborted:m,abort:te,execute:H,onFetchResponse:I.on,onFetchError:a.on,onFetchFinally:d.on,get:x("GET"),put:x("PUT"),post:x("POST"),delete:x("DELETE"),patch:x("PATCH"),head:x("HEAD"),options:x("OPTIONS"),json:U("json"),text:U("text"),blob:U("blob"),arrayBuffer:U("arrayBuffer"),formData:U("formData")};function x(v){return(F,O)=>{if(!h.value){s.method=v,s.payload=F,s.payloadType=O,Z(s.payload)&&S([ne,q(s.payload)],([E])=>E&&H(),{deep:!0});const k=b(s.payload);return!O&&k&&Object.getPrototypeOf(k)===Object.prototype&&(s.payloadType="json"),C(u({},V),{then(E,T){return J().then(E,T)}})}}}function J(){return new Promise((v,F)=>{_e(p).toBe(!0).then(()=>v(V)).catch(O=>F(O))})}function U(v){return()=>{if(!h.value)return s.type=v,C(u({},V),{then(F,O){return J().then(F,O)}})}}return o.immediate&&setTimeout(H,0),C(u({},V),{then(v,F){return J().then(v,F)}})}function $e(e,t){return!e.endsWith("/")&&!t.startsWith("/")?`${e}/${t}`:`${e}${t}`}var le;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(le||(le={}));var xe=Object.defineProperty,ce=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,fe=(e,t,n)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ue=(e,t)=>{for(var n in t||(t={}))Ae.call(t,n)&&fe(e,n,t[n]);if(ce)for(var n of ce(t))Se.call(t,n)&&fe(e,n,t[n]);return e};const ke={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Ue({linear:Oe},ke);function Me(e,t,n,i={}){var r,o,s;const{passive:c=!1,eventName:f,deep:w=!1,defaultValue:I}=i,a=me(),d=n||(a==null?void 0:a.emit)||((r=a==null?void 0:a.$emit)==null?void 0:r.bind(a))||((s=(o=a==null?void 0:a.proxy)==null?void 0:o.$emit)==null?void 0:s.bind(a==null?void 0:a.proxy));let p=f;t||(t="modelValue"),p=f||p||`update:${t.toString()}`;const h=()=>be(e[t])?e[t]:I;if(c){const m=D(h());return S(()=>e[t],l=>m.value=l),S(m,l=>{(l!==e[t]||w)&&d(p,l)},{deep:w}),m}else return L({get(){return h()},set(m){d(p,m)}})}const We=()=>{const e=ye();return De({baseUrl:"https://httpbin.org",options:{async beforeFetch({options:t}){const n=ve.getItem("access_token");return n&&(t.headers={Authorization:`Bearer ${n}`}),{options:t}},afterFetch({data:t,response:n}){return{data:t,response:n}},onFetchError({data:t,error:n,response:i}){const r={message:"unknow error",icon:"warning",color:"warning",position:"top",timeout:1500};switch((n.code==="ECONNABORTED"||n.message.indexOf("timeout")!==-1||n.message==="Network Error")&&(r.message="\u7DB2\u8DEF\u7570\u5E38",g.create(r)),i==null?void 0:i.status){case 401:r.message="(401)\u6B0A\u9650\u4E0D\u8DB3",g.create(r),e.setLogout();break;case 403:r.message="(403)",g.create(r);break;case 404:r.message="(404)",g.create(r);break;case 408:r.message="(408)",g.create(r);break;case 500:r.message="(500)",g.create(r);break;case 501:r.message="(501)",g.create(r);break;case 502:r.message="(502)",g.create(r);break;case 503:r.message="(503)",g.create(r);break;case 504:r.message="(504)",g.create(r);break;case 505:r.message="(505)",g.create(r);break;default:g.create(r);break}return{data:t,error:n}}},fetchOptions:{mode:"cors"}})};export{Me as a,Ve as b,De as c,We as u};
