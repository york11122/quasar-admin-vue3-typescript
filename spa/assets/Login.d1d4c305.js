import{Q as T}from"./QSkeleton.6b03494f.js";import{ab as F,aA as V,a2 as z,a3 as m,bz as D,g as M,r as w,aC as N,bA as O,au as G,aq as K,o as W,h as Z,bB as H,bC as L,ap as J,a0 as U,b2 as _,d as l,bD as E,bE as I,I as C,b as S,a9 as j,bs as X,bF as Y,v as ee,b4 as te,bo as oe,a1 as se}from"./index.79763ed7.js";import{u as ae}from"./user.632c69e5.js";import{_ as ne}from"./LottieWeb.3b9a7760.js";import{Q as re}from"./QToolbarTitle.58a0872a.js";import{Q as q,a as le}from"./QCard.43c81a88.js";import{Q as R}from"./QInput.2a11feb6.js";import{a as Q,u as ie}from"./myApi.75a72cec.js";import{a as ue}from"./focus-manager.387b0375.js";import"./use-dark.56902775.js";import"./tagView.010fdead.js";import"./_commonjsHelpers.825a3ddb.js";import"./uid.42677368.js";import"./use-form.fb7f1488.js";const de={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"896",width:"967.8852157128662"},ce=m("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1),fe={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},pe=["stop-color"],me=["stop-color"],ve=m("g",{opacity:"1"},[m("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1),_e=F({__name:"CornerBottom",props:{startColor:{default:"#28aff0"},endColor:{default:"#120fc4"}},setup(a){return(p,c)=>(V(),z("svg",de,[m("defs",null,[ce,m("linearGradient",fe,[m("stop",{offset:"0","stop-color":a.startColor,"stop-opacity":"1"},null,8,pe),m("stop",{offset:"1","stop-color":a.endColor,"stop-opacity":"1"},null,8,me)])]),ve]))}});var ge=D({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(a,{slots:p,emit:c}){const n=M(),f=w(null);let i=0;const r=[];function b(e){const t=[],d=typeof e=="boolean"?e:a.noErrorFocus!==!0,A=++i,k=(g,u)=>{c("validation-"+(g===!0?"success":"error"),u)};for(let g=0;g<r.length;g++){const u=r[g],x=u.validate();if(typeof x.then=="function")t.push(x.then(h=>({valid:h,comp:u}),h=>({valid:!1,comp:u,err:h})));else if(x!==!0){if(a.greedy===!1)return k(!1,u),d===!0&&typeof u.focus=="function"&&u.focus(),Promise.resolve(!1);t.push({valid:!1,comp:u})}}return t.length===0?(k(!0),Promise.resolve(!0)):Promise.all(t).then(g=>{const u=g.filter(P=>P.valid!==!0);if(u.length===0)return A===i&&k(!0),!0;const{valid:x,comp:h,err:$}=u[0];return A===i&&($!==void 0&&console.error($),k(!1,h),d===!0&&x!==!0&&typeof h.focus=="function"&&h.focus()),!1})}function v(){i++,r.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&L(e);const t=i+1;b().then(d=>{t===i&&d===!0&&(a.onSubmit!==void 0?c("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function s(e){e!==void 0&&L(e),c("reset"),J(()=>{v(),a.autofocus===!0&&a.noResetFocus!==!0&&o()})}function o(){ue(()=>{if(f.value===null)return;const e=f.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(f.value.querySelectorAll("[tabindex]"),t=>t.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}N(O,{bindComponent(e){r.push(e)},unbindComponent(e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}});let B=!1;return G(()=>{B=!0}),K(()=>{B===!0&&a.autofocus===!0&&o()}),W(()=>{a.autofocus===!0&&o()}),Object.assign(n.proxy,{validate:b,resetValidation:v,submit:y,reset:s,focus:o,getValidationComponents:()=>r}),()=>Z("form",{class:"q-form",ref:f,onSubmit:y,onReset:s},H(p.default))}});const he={class:"col flex justify-center items-center q-pa-md"},ye=j(" Windripple "),Ce=j(" \u767B\u5165 "),be=F({name:"Login"}),xe=F({...be,props:{username:{default:""},password:{default:""},loading:{type:Boolean,default:!1}},emits:["update:username","update:password","update:loading","onLoginClick"],setup(a,{emit:p}){const c=a,n=w(!0),f=w(null),i=Q(c,"username",p),r=Q(c,"password",p),b=Q(c,"loading",p),v=async()=>{var s;await((s=f.value)==null?void 0:s.validate())&&p("onLoginClick")};return(y,s)=>(V(),U(le,{flat:"",class:"row",style:{"border-radius":"20px",width:"85%","max-width":"400px"}},{default:_(()=>[m("div",he,[l(q,null,{default:_(()=>[l(E,{flat:""},{default:_(()=>[l(I,{name:"fa-solid fa-shield-dog",size:"30px"}),l(re,{shrink:"",class:"text-weight-bold"},{default:_(()=>[ye]),_:1})]),_:1})]),_:1}),l(q,{align:"center",class:"fit"},{default:_(()=>[l(C(ge),{ref_key:"loginForm",ref:f,class:"q-gutter-y-sm"},{default:_(()=>[l(R,{modelValue:C(i),"onUpdate:modelValue":s[0]||(s[0]=o=>S(i)?i.value=o:null),placeholder:"\u8ACB\u8F38\u5165\u5E33\u865F",dense:"",clearable:"",outlined:"","lazy-rules":"",rules:[o=>!!o||"\u8ACB\u8F38\u5165\u5E33\u865F"]},null,8,["modelValue","rules"]),l(R,{modelValue:C(r),"onUpdate:modelValue":s[2]||(s[2]=o=>S(r)?r.value=o:null),placeholder:"\u8ACB\u8F38\u5165\u5BC6\u78BC",dense:"",outlined:"",type:n.value?"password":"text","lazy-rules":"",rules:[o=>!!o||"\u8ACB\u8F38\u5165\u5BC6\u78BC"]},{append:_(()=>[l(I,{name:n.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[1]||(s[1]=o=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),l(E,{class:"full-width",size:"1.2em",rounded:"",unelevated:"",color:"primary",loading:C(b),onClick:v},{default:_(()=>[Ce]),_:1},8,["loading"])]),_:1},512)]),_:1})])]),_:1}))}});const we={class:"flex justify-center items-center",style:{height:"100%"}},Fe={class:"col-6 flex justify-center items-center"},Be=F({name:"Login"}),ke=F({...Be,setup(a){const p=ae(),c=Y(),n=ee({username:"admin",password:"admin"}),f=w(!1),i=w({path:"https://assets1.lottiefiles.com/packages/lf20_gzl797gs.json",loop:!0,animationSpeed:1}),r=ie(),{data:b,isFetching:v,onFetchError:y,execute:s,onFetchResponse:o}=r("/status/200",{immediate:!1}).post(n);y(e=>{console.log(e,"Error")}),o(async e=>{p.setLoginToken(n.username),c.push("/")});const B=()=>{f.value=!0};return(e,t)=>(V(),z("div",we,[l(_e,{class:"wave fit bg-black"}),te(m("div",Fe,[f.value?se("",!0):(V(),U(T,{key:0,type:"text",height:"70%",width:"50%"})),l(ne,{path:i.value.path,onIsLottieFinish:B},null,8,["path"])],512),[[oe,e.$q.screen.gt.sm]]),l(xe,{username:n.username,"onUpdate:username":t[0]||(t[0]=d=>n.username=d),password:n.password,"onUpdate:password":t[1]||(t[1]=d=>n.password=d),loading:C(v),"onUpdate:loading":t[2]||(t[2]=d=>S(v)?v.value=d:null),onOnLoginClick:t[3]||(t[3]=d=>C(s)())},null,8,["username","password","loading"])]))}});var Te=X(ke,[["__scopeId","data-v-3b5c37ec"]]);export{Te as default};
